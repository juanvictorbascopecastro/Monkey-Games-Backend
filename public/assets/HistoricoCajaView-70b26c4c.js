import{_ as j,r as a,o as r,e as p,w as e,a as o,b as t,d,N as S,m as x,K as V,c as g,F as T,i as U,t as u}from"./index-0487b031.js";import{c as $}from"./format-date-ea6389fa.js";import{T as L}from"./TableMovimientoCaja-6762c3f1.js";import{P as R}from"./Paginador-20b3a55a.js";const q={emits:["visible"],props:{visible:{type:Boolean,default:!1},data:{type:Object,default:null}},data(){return{value:null}},components:{TableMovimientoCaja:L},watch:{data:{immediate:!0,handler(s){s&&(this.value={idCajas:s.idCajas,idAperturaCajas:s.id})}}}},z={class:"row g-1"},E={class:"col-sm-12 col-md-12"};function K(s,_,v,B,i,f){const b=a("CModalTitle"),n=a("CModalHeader"),C=a("table-movimiento-caja"),h=a("CModalBody"),c=a("CModal");return r(),p(c,{alignment:"center",visible:v.visible,backdrop:"static",size:"xl",onClose:_[0]||(_[0]=()=>{s.$emit("visible",!1)})},{default:e(()=>[o(n,null,{default:e(()=>[o(b,null,{default:e(()=>[t("Movimientos de caja ")]),_:1})]),_:1}),o(h,null,{default:e(()=>[d("div",z,[d("div",E,[o(C,{data:i.value},null,8,["data"])])])]),_:1})]),_:1},8,["visible"])}const G=j(q,[["render",K]]),J={data(){return{COIN:S,showModalMov:!1,data:null,listFilter:[]}},computed:{...x("arqueo",["list","isLoading"])},mounted(){this.list.length<=0&&this.historico()},methods:{convertDate:$,...V("arqueo",["historico"]),getPermissions(s,_){const v=this.$store.getters["auth/getUser"]();return!s.includes(v.rol)},openTable(s){this.showModalMov=!0,this.data=s}},components:{HistoryMovCaja:G,Paginador:R}},Q={class:"row"},W={class:"col-12 col-sm-12"},X=d("div",{class:"row"},[d("div",{class:"col col-sm-12"},[d("h4",{class:"mt-1"},[d("strong",null,"HISTORICO")])])],-1),Y=d("h6",null,"No hay registros!",-1),Z={class:"col-12"},ee={class:"col-12"};function oe(s,_,v,B,i,f){const b=a("CCardHeader"),n=a("CTableHeaderCell"),C=a("CTableRow"),h=a("CTableHead"),c=a("CTableDataCell"),w=a("CBadge"),k=a("CIcon"),H=a("CButton"),M=a("CTableBody"),N=a("CSpinner"),F=a("CTable"),I=a("CCardBody"),P=a("CCard"),D=a("Paginador"),A=a("history-mov-caja");return r(),g("div",Q,[d("div",W,[o(P,{class:"mb-4"},{default:e(()=>[o(b,null,{default:e(()=>[X]),_:1}),o(I,null,{default:e(()=>[o(F,{responsive:""},{default:e(()=>[o(h,null,{default:e(()=>[o(C,null,{default:e(()=>[o(n,{scope:"col"},{default:e(()=>[t("Usuario")]),_:1}),o(n,{scope:"col"},{default:e(()=>[t("Caja")]),_:1}),o(n,{scope:"col"},{default:e(()=>[t("Fecha Apertura")]),_:1}),o(n,{scope:"col"},{default:e(()=>[t("Fecha Cierre")]),_:1}),o(n,{scope:"col"},{default:e(()=>[t("Monto Inicial")]),_:1}),o(n,{scope:"col"},{default:e(()=>[t("Monto Final")]),_:1}),o(n,{scope:"col"},{default:e(()=>[t("Accion")]),_:1})]),_:1})]),_:1}),s.list.length>0?(r(),p(M,{key:0},{default:e(()=>[(r(!0),g(T,null,U(i.listFilter,(l,O)=>(r(),p(C,{key:O},{default:e(()=>[o(c,null,{default:e(()=>{var m,y;return[t(u((m=l.User)==null?void 0:m.name)+" "+u(((y=l.User)==null?void 0:y.lastName)||""),1)]}),_:2},1024),o(n,{scope:"row"},{default:e(()=>{var m;return[t(u((m=l.Caja)==null?void 0:m.name),1)]}),_:2},1024),o(c,null,{default:e(()=>[t(u(f.convertDate(l.date)),1)]),_:2},1024),o(c,null,{default:e(()=>[l.CierreCaja?(r(),g(T,{key:0},[t(u(f.convertDate(l.CierreCaja.date)),1)],64)):(r(),p(w,{key:1,color:"success"},{default:e(()=>[t(" apertura en curso")]),_:1}))]),_:2},1024),o(c,null,{default:e(()=>[t(u(l.startAmount)+" "+u(i.COIN),1)]),_:2},1024),o(c,null,{default:e(()=>[t(u(l.CierreCaja?`${l.CierreCaja.endAmount} ${i.COIN}`:""),1)]),_:2},1024),o(c,null,{default:e(()=>[o(H,{color:"info",size:"sm",class:"me-1",disabled:f.getPermissions(["admin","cajero"]),onClick:m=>f.openTable(l)},{default:e(()=>[o(k,{icon:"cil-info"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):s.isLoading?(r(),p(M,{key:1},{default:e(()=>[o(C,null,{default:e(()=>[o(c,{colspan:"7",class:"text-center p-4"},{default:e(()=>[o(N,{color:"primary"})]),_:1})]),_:1})]),_:1})):(r(),p(M,{key:2},{default:e(()=>[o(C,null,{default:e(()=>[o(c,{colspan:"7",class:"text-center p-4"},{default:e(()=>[Y]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),d("div",Z,[o(D,{list:s.list,elementosPorPagina:10,onSetData:_[0]||(_[0]=l=>i.listFilter=l)},null,8,["list"])]),d("div",ee,[o(A,{data:i.data,visible:i.showModalMov,onVisible:_[1]||(_[1]=l=>i.showModalMov=l)},null,8,["data","visible"])])])}const ne=j(J,[["render",oe]]);export{ne as default};
