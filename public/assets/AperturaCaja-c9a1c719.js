import{_ as V,N as y,l as j,r as d,c as A,d as o,b as u,t as v,a,w as n,Q as i,o as x,T as f}from"./index-0487b031.js";import{e as C,b as _}from"./format-date-ea6389fa.js";const q={data(){return{validatedCustom01:null,valInput:{date:C(new Date),amount:0,time:_(new Date),comment:null},COIN:y}},computed:{...j("caja",["getCaja"]),getDisabled(){const t=this.$store.state.caja.caja;return!!(t&&t.idOpened)},getUser(){const t=this.$store.getters["auth/getUser"]();return`${t.name} ${t.lastName||""}`}},methods:{initData(){const t=this.$store.state.caja.caja;if(!t)return;const e=this.$store.getters["arqueo/getApertura"](t.id);if(!e){this.valInput={date:C(new Date),amount:0,time:_(new Date),comment:null};return}this.valInput.comment=e.comment,this.valInput.amount=e.startAmount,this.valInput.date=C(new Date(e.date)),this.valInput.time=_(new Date(e.date))},async Validate(){if(event.currentTarget.checkValidity()===!1&&(event.preventDefault(),event.stopPropagation()),this.validatedCustom01=!0,!this.$store.state.caja.caja){document.getElementById("select-caja").focus();return}this.valInput.date&&this.valInput.time&&this.valInput.amount!==null&&await this.$store.dispatch("arqueo/aperturar",{date:new Date(this.valInput.date+" "+this.valInput.time),amount:this.valInput.amount,comment:this.valInput.comment})},changueFocus(t){const e=element("form-apertura",t);e&&e.focus()}},watch:{"$store.state.caja.caja":{immediate:!0,handler(t){this.initData()}},"$store.state.arqueo.listApertura":{immediate:!0,handler(t){Array.isArray(t)&&t.length>0&&this.initData()}}}},T={class:"col-12"},U={class:"col-12 col-sm-4"},B=o("span",{class:"text-danger"},"*",-1),N={class:"col-12 col-sm-4"},G=o("span",{class:"text-danger"},"*",-1),k={class:"col-12 col-sm-4"},M=o("span",{class:"text-danger"},"*",-1),O={class:"col-12 col-sm-12"},S={class:"col-12 col-sm-12 text-end"};function K(t,e,R,E,s,l){const m=d("CFormLabel"),c=d("CFormInput"),p=d("CFormFeedback"),h=d("CInputGroupText"),g=d("CInputGroup"),D=d("CFormTextarea"),b=d("CButton"),w=d("CIcon"),F=d("CForm");return x(),A("div",T,[o("p",null,[u(" Cajero/a: "),o("b",null,v(l.getUser),1)]),a(F,{class:"row g-3 needs-validation",novalidate:"",validated:s.validatedCustom01,onSubmit:i(l.Validate,["prevent"]),id:"form-apertura"},{default:n(()=>{var I;return[o("div",U,[a(m,{for:"validatedCustom01",class:"mb-0"},{default:n(()=>[u("Fecha "),B]),_:1}),a(c,{id:"validatedCustom01",modelValue:s.valInput.date,"onUpdate:modelValue":e[0]||(e[0]=r=>s.valInput.date=r),type:"date",name:"date",disabled:l.getDisabled,required:"",onKeydown:e[1]||(e[1]=f(i(r=>l.changueFocus("time"),["prevent"]),["enter"]))},null,8,["modelValue","disabled"]),a(p,{invalid:""},{default:n(()=>[u(" Fecha de apertura es requerido! ")]),_:1})]),o("div",N,[a(m,{for:"validatedCustom01",class:"mb-0"},{default:n(()=>[u("Hora "),G]),_:1}),a(c,{id:"validatedCustom01",modelValue:s.valInput.time,"onUpdate:modelValue":e[2]||(e[2]=r=>s.valInput.time=r),type:"time",name:"time",disabled:l.getDisabled,required:"",onKeydown:e[3]||(e[3]=f(i(r=>l.changueFocus("amount"),["prevent"]),["enter"]))},null,8,["modelValue","disabled"]),a(p,{invalid:""},{default:n(()=>[u(" Hora de apertura es requerido! ")]),_:1})]),o("div",k,[a(m,{for:"validatedCustom01",class:"mb-0"},{default:n(()=>[u("Monto "),M]),_:1}),a(g,{class:"mb-3"},{default:n(()=>[a(c,{id:"validatedCustom01",required:"",type:"number",disabled:l.getDisabled,modelValue:s.valInput.amount,"onUpdate:modelValue":e[4]||(e[4]=r=>s.valInput.amount=r),name:"amount",onKeydown:e[5]||(e[5]=f(i(r=>l.changueFocus("comment"),["prevent"]),["enter"]))},null,8,["disabled","modelValue"]),a(h,null,{default:n(()=>[o("b",null,v(s.COIN),1)]),_:1})]),_:1}),a(p,{invalid:""},{default:n(()=>[u(" Monto inicial de apertura es requerido! ")]),_:1})]),o("div",O,[a(D,{id:"validatedCustom01",label:"Comentario",modelValue:s.valInput.comment,"onUpdate:modelValue":e[6]||(e[6]=r=>s.valInput.comment=r),placeholder:"Comentario...",disabled:l.getDisabled,name:"comment",rows:"2"},null,8,["modelValue","disabled"])]),o("div",S,[a(b,{color:"secondary",type:"buttom",disabled:l.getDisabled},{default:n(()=>[u("LIMPIAR")]),_:1},8,["disabled"]),a(b,{color:"primary",type:"submit",class:"ms-2",disabled:(I=t.cajaSelect)==null?void 0:I.idOpened},{default:n(()=>[a(w,{icon:"cil-save"}),u(" "+v(t.$route.params.id?"GUARDAR CAMBIOS":"ACEPTAR"),1)]),_:1},8,["disabled"])])]}),_:1},8,["validated","onSubmit"])])}const P=V(q,[["render",K]]);export{P as default};
