import{_ as A,N as z,m as I,K as F,S as H,r as a,c as V,d as u,a as e,w as t,o as _,e as v,b as l,j as x,F as U,i as L,t as r}from"./index-0487b031.js";import{P as O}from"./Paginador-20b3a55a.js";import{c as E}from"./format-date-ea6389fa.js";import{A as R}from"./AddVenta-d35eb7f5.js";import"./picture-093c9837.js";import"./user-account-441e03f2.js";import"./AddClient-b2ea6b76.js";import"./input-45862cdb.js";import"./InputPhone-652e83e5.js";const $={components:{Paginador:O,AddVenta:R},data(){return{modalVisible:!1,paramsSelected:null,listFilter:[],COIN:z}},computed:{...I("venta",["list","isLoading"])},mounted(){this.list.length<=0&&this.loadData()},methods:{convertDate:E,...F("venta",["loadData"]),setItem(c){this.modalVisible=!0,this.paramsSelected=c},msgDelete(c){H.fire({title:"Â¿Desea cancelar esta venta?",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#bdbdbd",confirmButtonText:"SI",cancelButtonText:"NO"}).then(s=>{s.isConfirmed&&this.$store.dispatch("venta/remove",c.id)})},getPermissions(c){const s=this.$store.getters["auth/getUser"]();return!c.includes(s.rol)}}},j={class:"row"},q={class:"col col-sm-12"},K={class:"row"},X=u("div",{class:"col col-sm-4"},[u("h4",{class:"mt-1"},[u("strong",null,"VENTAS")])],-1),G={class:"col col-sm-8 text-end"},J=u("h6",null,"No hay registros!",-1),M={class:"col col-sm-12"};function Q(c,s,W,Y,d,b){const p=a("CIcon"),C=a("CButton"),T=a("CCardHeader"),m=a("CTableHeaderCell"),g=a("CTableRow"),k=a("CTableHead"),i=a("CTableDataCell"),h=a("CTableBody"),y=a("CSpinner"),B=a("CTable"),N=a("Paginador"),S=a("CCardBody"),D=a("CCard"),w=a("AddVenta");return _(),V("div",j,[u("div",q,[e(D,{class:"mb-4"},{default:t(()=>[e(T,null,{default:t(()=>[u("div",K,[X,u("div",G,[b.getPermissions(["admin"])?x("",!0):(_(),v(C,{key:0,color:"secondary",size:"md",variant:"outline",class:"me-1",onClick:s[0]||(s[0]=o=>c.$router.push({name:"ventas-canceladas"}))},{default:t(()=>[e(p,{icon:"cil-X",class:"me-2"}),l(" Ventas canceladas ")]),_:1})),e(C,{color:"success",size:"md",class:"me-1",onClick:s[1]||(s[1]=o=>c.loadData())},{default:t(()=>[e(p,{icon:"cil-sync",class:"me-2"}),l(" Actualizar ")]),_:1}),e(C,{color:"primary",size:"md",class:"me-1",onClick:s[2]||(s[2]=o=>(d.modalVisible=!0,d.paramsSelected=null))},{default:t(()=>[e(p,{icon:"cil-plus",class:"me-2"}),l(" Nuevo ")]),_:1})])])]),_:1}),e(S,null,{default:t(()=>[e(B,{responsive:"",size:"sm"},{default:t(()=>[e(k,null,{default:t(()=>[e(g,null,{default:t(()=>[e(m,{scope:"col"},{default:t(()=>[l("Cliente")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Codigo")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Total")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Productos")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Fecha")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Usuario")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Acciones")]),_:1})]),_:1})]),_:1}),c.list.length>0?(_(),v(h,{key:0},{default:t(()=>[(_(!0),V(U,null,L(d.listFilter,(o,P)=>(_(),v(g,{key:P},{default:t(()=>[e(i,{scope:"row"},{default:t(()=>{var n,f;return[l(r((n=o.Client)==null?void 0:n.name)+" "+r((f=o.Client)==null?void 0:f.lastName),1)]}),_:2},1024),e(i,null,{default:t(()=>{var n;return[l(r((n=o.Client)==null?void 0:n.code),1)]}),_:2},1024),e(i,null,{default:t(()=>[l(r(o.total)+" "+r(d.COIN),1)]),_:2},1024),e(i,null,{default:t(()=>[l(r(o.VentaProducts.map(n=>`${n.amount}
                  ${n.Product.name}`).join(", ")),1)]),_:2},1024),e(i,null,{default:t(()=>[l(r(b.convertDate(o.date)),1)]),_:2},1024),e(i,{scope:"row"},{default:t(()=>{var n,f;return[l(r((n=o.User)==null?void 0:n.name)+" "+r((f=o.User)==null?void 0:f.lastName),1)]}),_:2},1024),e(i,null,{default:t(()=>[e(C,{color:"info",size:"sm",class:"me-1",onClick:n=>b.setItem(o)},{default:t(()=>[e(p,{icon:"cil-pencil"})]),_:2},1032,["onClick"]),e(C,{color:"danger",size:"sm",onClick:n=>b.msgDelete(o)},{default:t(()=>[e(p,{icon:"cil-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):c.isLoading?(_(),v(h,{key:1},{default:t(()=>[e(g,null,{default:t(()=>[e(i,{colspan:"9",class:"text-center p-4"},{default:t(()=>[e(y,{color:"primary"})]),_:1})]),_:1})]),_:1})):(_(),v(h,{key:2},{default:t(()=>[e(g,null,{default:t(()=>[e(i,{colspan:"9",class:"text-center p-4"},{default:t(()=>[J]),_:1})]),_:1})]),_:1}))]),_:1}),e(N,{list:c.list,elementosPorPagina:10,onSetData:s[3]||(s[3]=o=>d.listFilter=o)},null,8,["list"])]),_:1})]),_:1})]),u("div",M,[e(w,{visible:d.modalVisible,data:d.paramsSelected,onVisible:s[4]||(s[4]=o=>d.modalVisible=o)},null,8,["visible","data"])])])}const ie=A($,[["render",Q]]);export{ie as default};
