import{N as P,K as A,O,_ as S,r as s,o as _,c as b,d as p,a as e,w as t,b as a,e as m,F as T,i as D,t as u,L as M,M as G}from"./index-2006f269.js";import{c as L}from"./format-date-ea6389fa.js";import{P as H}from"./Paginador-8381f521.js";const z={props:{data:{type:Object,default:null}},data(){return{isLoading:!1,list:[],COIN:P,total:0,listFilter:[]}},methods:{...A("arqueo",["movement"]),convertDate:L,getPermissions(o,l){const c=this.$store.getters["auth/getUser"]();return!o.includes(c.rol)}},watch:{data:{immediate:!0,async handler(o){if(o){const{total:l,list:c}=await this.movement(o);Array.isArray(c)&&(this.list=c),l&&(this.total=l)}}},"$store.state.caja.caja":{immediate:!0,async handler(o){if(!this.data&&o){if(!o){O("warning");return}if(!this.data&&o.idOpened&&this.list.length<=0){const{total:l,list:c}=await this.movement();Array.isArray(c)&&(this.list=c),l&&(this.total=l)}}else this.data||(this.list=[],this.listFilter=[])}}},components:{Paginador:H}},V=o=>(M("data-v-5d84b785"),o=o(),G(),o),R={class:"col-12"},U=V(()=>p("h6",null,"No hay registros!",-1)),q={class:"col-12 row"},E={class:"col-12 col-sm-6"},K={class:"col-12 col-sm-6"};function J(o,l,c,Q,i,h){const r=s("CTableHeaderCell"),f=s("CTableRow"),v=s("CTableHead"),d=s("CTableDataCell"),y=s("CBadge"),I=s("CIcon"),w=s("CButton"),C=s("CTableBody"),x=s("CSpinner"),B=s("CTable"),g=s("CInputGroupText"),F=s("CFormInput"),j=s("CInputGroup"),k=s("Paginador");return _(),b(T,null,[p("div",R,[e(B,{responsive:""},{default:t(()=>[e(v,null,{default:t(()=>[e(f,null,{default:t(()=>[e(r,{scope:"col"},{default:t(()=>[a("Movimiento")]),_:1}),e(r,{scope:"col"},{default:t(()=>[a("Monto")]),_:1}),e(r,{scope:"col"},{default:t(()=>[a("Flujo")]),_:1}),e(r,{scope:"col"},{default:t(()=>[a("Fecha")]),_:1}),e(r,{scope:"col"},{default:t(()=>[a("Usuario")]),_:1}),e(r,{scope:"col"},{default:t(()=>[a("Accion")]),_:1})]),_:1})]),_:1}),i.list.length>0?(_(),m(C,{key:0},{default:t(()=>[(_(!0),b(T,null,D(i.listFilter,(n,N)=>(_(),m(f,{key:N},{default:t(()=>[e(r,{scope:"row"},{default:t(()=>[a(u(n.movement),1)]),_:2},1024),e(d,null,{default:t(()=>[a(u(n.total)+" "+u(i.COIN),1)]),_:2},1024),e(d,null,{default:t(()=>[e(y,{color:n.flujo==="Ingreso"?"success":"danger"},{default:t(()=>[a(u(n.flujo),1)]),_:2},1032,["color"])]),_:2},1024),e(d,null,{default:t(()=>[a(u(h.convertDate(n.date)),1)]),_:2},1024),e(d,null,{default:t(()=>[a(u(n.user),1)]),_:2},1024),e(d,null,{default:t(()=>[e(w,{color:"info",size:"sm",class:"me-1",disabled:h.getPermissions(["admin"]),onClick:W=>o.update(n)},{default:t(()=>[e(I,{icon:"cil-info"})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):i.isLoading?(_(),m(C,{key:1},{default:t(()=>[e(f,null,{default:t(()=>[e(d,{colspan:"7",class:"text-center p-4"},{default:t(()=>[e(x,{color:"primary"})]),_:1})]),_:1})]),_:1})):(_(),m(C,{key:2},{default:t(()=>[e(f,null,{default:t(()=>[e(d,{colspan:"7",class:"text-center p-4"},{default:t(()=>[U]),_:1})]),_:1})]),_:1}))]),_:1})]),p("div",q,[p("div",E,[e(j,{class:"mb-3",style:{"max-width":"250px"},size:"sm"},{default:t(()=>[e(g,{id:"inputGroup-sizing-sm"},{default:t(()=>[a("TOTAL:")]),_:1}),e(F,{disabled:"",value:i.total},null,8,["value"]),e(g,{id:"addon-wrapping"},{default:t(()=>[a(u(i.COIN),1)]),_:1})]),_:1})]),p("div",K,[e(k,{list:i.list,elementosPorPagina:10,onSetData:l[0]||(l[0]=n=>i.listFilter=n)},null,8,["list"])])])],64)}const $=S(z,[["render",J],["__scopeId","data-v-5d84b785"]]);export{$ as T};
