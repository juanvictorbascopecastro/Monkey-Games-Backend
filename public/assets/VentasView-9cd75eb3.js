import{_ as A,m as z,K as F,S as H,r as a,c as V,d,a as e,w as t,o as _,e as b,b as l,j as x,F as I,i as U,t as r}from"./index-2006f269.js";import{P as L}from"./Paginador-8381f521.js";import{c as j}from"./format-date-ea6389fa.js";import{A as E}from"./AddVenta-d6268a51.js";import"./picture-093c9837.js";import"./user-account-441e03f2.js";import"./AddClient-421475f7.js";import"./input-45862cdb.js";import"./InputPhone-560f6b25.js";const R={components:{Paginador:L,AddVenta:E},data(){return{modalVisible:!1,paramsSelected:null,listFilter:[]}},computed:{...z("venta",["list","isLoading"])},mounted(){this.list.length<=0&&this.loadData()},methods:{convertDate:j,...F("venta",["loadData"]),setItem(c){this.modalVisible=!0,this.paramsSelected=c},msgDelete(c){H.fire({title:"Â¿Desea cancelar esta venta?",icon:"question",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#bdbdbd",confirmButtonText:"SI",cancelButtonText:"NO"}).then(s=>{s.isConfirmed&&this.$store.dispatch("venta/remove",c.id)})},getPermissions(c){const s=this.$store.getters["auth/getUser"]();return!c.includes(s.rol)}}},q={class:"row"},K={class:"col col-sm-12"},O={class:"row"},X=d("div",{class:"col col-sm-4"},[d("h4",{class:"mt-1"},[d("strong",null,"VENTAS")])],-1),$={class:"col col-sm-8 text-end"},G=d("h6",null,"No hay registros!",-1),J={class:"col col-sm-12"};function M(c,s,Q,W,u,v){const p=a("CIcon"),C=a("CButton"),T=a("CCardHeader"),m=a("CTableHeaderCell"),g=a("CTableRow"),k=a("CTableHead"),i=a("CTableDataCell"),h=a("CTableBody"),y=a("CSpinner"),B=a("CTable"),S=a("Paginador"),D=a("CCardBody"),w=a("CCard"),P=a("AddVenta");return _(),V("div",q,[d("div",K,[e(w,{class:"mb-4"},{default:t(()=>[e(T,null,{default:t(()=>[d("div",O,[X,d("div",$,[v.getPermissions(["admin"])?x("",!0):(_(),b(C,{key:0,color:"secondary",size:"md",variant:"outline",class:"me-1",onClick:s[0]||(s[0]=o=>c.$router.push({name:"ventas-canceladas"}))},{default:t(()=>[e(p,{icon:"cil-X",class:"me-2"}),l(" Ventas canceladas ")]),_:1})),e(C,{color:"success",size:"md",class:"me-1",onClick:s[1]||(s[1]=o=>c.loadData())},{default:t(()=>[e(p,{icon:"cil-sync",class:"me-2"}),l(" Actualizar ")]),_:1}),e(C,{color:"primary",size:"md",class:"me-1",onClick:s[2]||(s[2]=o=>(u.modalVisible=!0,u.paramsSelected=null))},{default:t(()=>[e(p,{icon:"cil-plus",class:"me-2"}),l(" Nuevo ")]),_:1})])])]),_:1}),e(D,null,{default:t(()=>[e(B,{responsive:"",size:"sm"},{default:t(()=>[e(k,null,{default:t(()=>[e(g,null,{default:t(()=>[e(m,{scope:"col"},{default:t(()=>[l("Cliente")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Codigo")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Total")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Productos")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Fecha")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Usuario")]),_:1}),e(m,{scope:"col"},{default:t(()=>[l("Acciones")]),_:1})]),_:1})]),_:1}),c.list.length>0?(_(),b(h,{key:0},{default:t(()=>[(_(!0),V(I,null,U(u.listFilter,(o,N)=>(_(),b(g,{key:N},{default:t(()=>[e(i,{scope:"row"},{default:t(()=>{var n,f;return[l(r((n=o.Client)==null?void 0:n.name)+" "+r((f=o.Client)==null?void 0:f.lastName),1)]}),_:2},1024),e(i,null,{default:t(()=>{var n;return[l(r((n=o.Client)==null?void 0:n.code),1)]}),_:2},1024),e(i,null,{default:t(()=>[l(r(o.total),1)]),_:2},1024),e(i,null,{default:t(()=>[l(r(o.VentaProducts.map(n=>n.Product.name).join(", ")),1)]),_:2},1024),e(i,null,{default:t(()=>[l(r(v.convertDate(o.date)),1)]),_:2},1024),e(i,{scope:"row"},{default:t(()=>{var n,f;return[l(r((n=o.User)==null?void 0:n.name)+" "+r((f=o.User)==null?void 0:f.lastName),1)]}),_:2},1024),e(i,null,{default:t(()=>[e(C,{color:"info",size:"sm",class:"me-1",onClick:n=>v.setItem(o)},{default:t(()=>[e(p,{icon:"cil-pencil"})]),_:2},1032,["onClick"]),e(C,{color:"danger",size:"sm",onClick:n=>v.msgDelete(o)},{default:t(()=>[e(p,{icon:"cil-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):c.isLoading?(_(),b(h,{key:1},{default:t(()=>[e(g,null,{default:t(()=>[e(i,{colspan:"9",class:"text-center p-4"},{default:t(()=>[e(y,{color:"primary"})]),_:1})]),_:1})]),_:1})):(_(),b(h,{key:2},{default:t(()=>[e(g,null,{default:t(()=>[e(i,{colspan:"9",class:"text-center p-4"},{default:t(()=>[G]),_:1})]),_:1})]),_:1}))]),_:1}),e(S,{list:c.list,elementosPorPagina:10,onSetData:s[3]||(s[3]=o=>u.listFilter=o)},null,8,["list"])]),_:1})]),_:1})]),d("div",J,[e(P,{visible:u.modalVisible,data:u.paramsSelected,onVisible:s[4]||(s[4]=o=>u.modalVisible=o)},null,8,["visible","data"])])])}const ce=A(R,[["render",M]]);export{ce as default};
